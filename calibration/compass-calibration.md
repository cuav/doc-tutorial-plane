## Compass电子罗盘校准 {#compass电子罗盘校准}

---

PixHack V2/ PIXHAWK 内置1个板载电子罗盘，可以外接一个外部电子罗盘，一共有2个罗盘

PixHack V3内置了2个板载电子罗盘，可以外接一个外部电子罗盘，一共可以由3个罗盘  
GPS是不需要设置和校准的  
校准的是GPS内置的电子罗盘

### 校准第一步：（校准必须飞控及GPS装上飞行器，并固定好才能进行） {#校准第一步：（校准必须飞控及gps装上飞行器，并固定好才能进行）}

* 在地面站-初始设置-必要硬件-电子罗盘
* Pixhack/PIXHAWK飞控均选择PIXHAWK/PX4选项
* Compass \#1罗盘配置是
  **不需要设置**
  的，采用
  **默认值（常规安装方式）**

罗盘序号对应硬件型号：  
有外置GPS罗盘时：\#1 HMC5983（GPS集成）  \#2 LSM303D（板载）  \#3 MPU9250/HMC5983（板载）  
无外置GPS罗盘时：\#1 LSM303D（板载）     \#2 MPU9250（板载）

如果需要禁用对应罗盘，在对应框 Use this compass 去掉勾 即可！  
如果出现了罗盘不一致，也可以禁用内置罗盘试试

COPTER 3.4以上固件版本，支持**机载校准**方式，校准程序运行在飞控板上面，这种方法相比旧的球形方式更准确

#### CUAV强烈推荐使用板载校准的方式，特别是V3版本的飞控，采用板载校准很更准确，旧的球形校准，很容易出现采集数据量不够的问题，导致经常报 罗盘不一致 {#cuav强烈推荐使用板载校准的方式，特别是v3版本的飞控，采用板载校准很更准确，旧的球形校准，很容易出现采集数据量不够的问题，导致经常报-罗盘不一致}

PS: 之前的版本，校准采用的是 地面站计算 飞控过来的罗盘数据，通过地面站程序计算得出数值，写入到飞控。

![](/assets/compass onboard.png)

执行上的校准:

* 点击“记载罗盘校准”部分的“开始”按钮

* 如果你的飞行控制器有蜂鸣器上你应该听到单音其次是每秒一次短的哔哔声

* 保持车辆在空中旋转,这样每一方\(前、后、左、右,顶部和底部\)点瞄准地球几秒钟

  ![](/assets/accel-calib-positions-e1376083327116.png)

* 等待进度条一步一步往右填满，直到校准我完成。

* 校准完成后，蜂鸣器会发出来三声，地面站会有提示重启飞控板，重启后既可完成校准！

如果校准失败:

* 你会听到故障声，绿色进度条会重置到最左边，校准程序可能会重新启动。
* 如果经过多次尝试都无法校准，你需要把fitness下拉选项，改为default或者very strict 。再重新校准试试

目前固件可能无法使用3组罗盘进行校准  
可以尝试禁用\#3罗盘

