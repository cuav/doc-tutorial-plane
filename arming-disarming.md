## 解锁飞机

---

在你飞行之前，你需要解锁。在飞行前对飞机进行锁定有两个目的：

* 当飞行员没有准备好飞行时防止电机转动（一个安全功能）

* 在自动驾驶仪完全配置并准备飞行之前，防止起飞

在过去的APM版本中：固定翼锁定是可选的，默认情况下禁用锁定要求（由ARMING\_REQUIRED参数控制）。在3.3以后的固件中，默认是锁定的。

解锁的关键是启用电机。在飞机解锁之前，您将无法启动电机（即控制油门）。

注意：如果您启用了AHRS\_EKF\_USE（您正在使用EKF），则在解锁前启用解锁检查很重要。没有解锁检查，可能会出现ekf失效导致飞行异常甚至炸机。

## 配置锁定

## 有三个参数来控制锁定如何工作：

* ARMING\_REQUIRE：这将控制是否需要锁定。默认值是1，这意味着起飞前需要锁定。如果设置为0，则不需要锁定。

* ARMING\_CHECK：这将控制在允许解锁之前检查自动驾驶仪的功能。默认值是1，表示所有的检查都完成了。大多数用户应该把它设成1，因为解锁检查是重要的，以确保自动驾驶仪各项设备正常运行。

* ARMING\_RUDDER：该参数允许您配置基于方向舵的解锁和上锁。默认值是1，这意味着你可以用向右打杆解锁和上锁。如果你设置为2，你也可以用往左打杆上锁和解锁。如果将此设置为0，则只能通过地面站进行上锁/解锁。

## 如何解锁

当你准备好飞行时，你可以解锁电机。 这可以通过两种方式来完成：

遥控器解锁， 将方向杆打到最右，并将油门杆打到最低保持两秒。

GCS武装。 按下地面站上的布防按钮。

如何上锁

由于APM：固定翼3.4.0，可以使用遥控器上锁：保持油门在最低和向左舵2秒。在ArduPlane飞行中，飞行员可能会意外触发这种情况，所以在上锁之前还有其他要求：

*  您需要通过将ARMING\_RUDDER参数更改为2（ArmOrDisarm）来允许方向舵上锁。

* 飞手需要确保飞机没有飞行。并且空速为0，否则可能无法上锁。

您也可以使用以下方法之一

* 使用电调进行上锁：

*  使用地面站发出上锁命令

* 使用飞机上的安全开关（在Pixhawk上）

自动降落后，如果飞机仍然在地面上，飞机将在20秒后自动上锁（由LAND\_DISARMDELAY参数控制）

### 蜂鸣器和安全开关状态指示

如果自动驾驶仪已上锁，但以及配置好（包括gps已定位），主LED灯闪绿色。

如果自动驾驶仪已经解锁，主LED常亮绿色。

当自动驾驶仪解锁时，蜂鸣器会有“滴”的长音

当自动驾驶仪上锁时，蜂鸣器响“滴滴”两声。

## 解锁检查

在允许解锁之前，自动驾驶仪会检查一组条件。所有的条件必须通过才允许借宿。如果任何条件失败，那么解锁失败错误信息发给GCS（地面站）。

执行的检查是：

*  安全开关。在允许解锁之前，必须将PX4安全开关设置为安全关闭状态。这可以通过按住安全开关2秒直到它停止闪烁，或者通过设置BRD\_SAFETY\_ENABLE = 0来禁用安全开关

* 气压计检查。气压计必须健康（获取良好的数据）

* 惯性传感器检查。加速度计和陀螺仪必须都是健康的，都要进行校准。如果你有多个加速器或陀螺仪，那么他们需要保持一致。

* AHRS检查。 AHRS（姿态参考系统）需要被初始化并准备就绪。请注意，如果您启用了EKF，则启动后可能需要30秒。

* 指南针检查。所有罗盘都必须进行配置和校准，并且需要保持一致（如果您有多个指南针）

* GPS检查。你需要有一个3D的GPS定位。

* 电池检查。电池电压必须高于故障安全电压（如果已配置）

* 空速检查。如果您配置了空速传感器，则传感器需要工作。

* 日志检查。日志子系统需要工作（即必须安装microSD并在PX4上工作）

* RC控制检查。遥控器已校准且没有触发失控保护。

## 锁定时油门输出

当飞机锁定时，油门通道不会响应飞行员的输入。您可以配置两种可能的行为：

*  ARMING\_REQUIRE = 1。锁定时，油门通道的最小值（通常为RC3\_MIN）将被发送到油门通道

* ARMING\_REQUIRE = 2。锁定时，没有pwm信号发送到油门通道。请注意，有些电调会发出蜂鸣声，提示没有pwm型号。

### 解锁失败

如果您的飞机拒绝解锁，要诊断故障问题，请遵循本指南

检查飞机是否已经配置好（解锁前请确保硬件已经校准完成，包括加速计，陀螺仪，罗盘，遥控器；并且有良好的gps定位）

固定翼飞机，已经配置好，飞控主led会闪绿色灯。

如报bad ahrs，请校准空速计，并重新上电，等待。

尝试解锁

尝试用你的GCS（地面站）发送一个arm命令。如果解锁被拒绝，则会从自动驾驶仪向GCS发送一条消息，指出拒绝解锁的原因。

遥控器解锁

如果您使用遥控器解锁失败并且地面站没有提示错误，请检查遥控器是否校准，或飞控收到的遥控信号不是油门最低，方向舵最高。

##[解锁失败地面站提示详解](pre-arm.md)



